% UPDATED BY MARCUS SCHAGERBERG, 2023
% CREATED BY DAVID FRISK, 2016
%\section{Section levels}
%The following table presents an overview of the section levels that are used in this document. The number of levels %that are numbered and included in the table of contents is set in the settings file \texttt{settings.tex}. The levels %are shown in Section \ref{Section_ref}.
%\begin{table}[H]
%\centering
%\begin{tabular}{ll} \hline\hline
%Name & Command\\ \hline
%Chapter & \textbackslash\texttt{chapter\{\emph{Chapter name}\}}\\
%Section & \textbackslash\texttt{section\{\emph{Section name}\}}\\
%Subsection & \textbackslash\texttt{subsection\{\emph{Subsection name}\}}\\
%Paragraph & \textbackslash\texttt{paragraph\{\emph{Paragraph name}\}}\\
%Subparagraph & \textbackslash\texttt{paragraph\{\emph{Subparagraph name}\}}\\ \hline\hline
%\end{tabular}
%\end{table}
This section will present the purpose and goal of the project at large. It also introduces what the project tries to achieve. Finally, it will include some related work and the ethical aspects of this project.
% WRTTEN BY MARTIN BLOM, 2023
\section{Background}
    Traffic congestion is the result of the demand for road and railway travel exceeding the supply. This problem can be seen all around the world\cite{inrix}, and it impacts our quality of life. As vehicular traffic builds up, other vehicles like bikes, cars, buses and trams can move significantly slower resulting in increased delays and fuel wastage. Moreover, delaying transportation of goods can lead to an increase in economical costs, food waste and general inconvenience for the affected parties.

    Not only does this affect our society on the larger scale, but also on an individual scale. If the average commuting time does not decrease, the average citizen will spend around a year of their life commuting. According to Trafikanalys' data of traffic habits\cite{trafikanalys_2022}, the average Swedish citizen's daily commuting time during 2019 was just under 1 hour and dropped to around 45 minutes post-COVID. Some amount of commuting time is inevitable in our current society. However, if you consider some of the larger cities in the world such as London, an estimate of 156 hours per person was lost in just traffic delay alone during 2022\cite{inrix}.

    Other than leading to loss of time and resources, congestion and traffic in general leads to air pollution which poses health hazards and also lowers the quality of life\cite{urban_2004}. A study of air pollution in connection to cars made in the USA during 2022, shows that transportation accounted for 27\% of the total greenhouse gas emissions\cite{treehugger_2022}. By reducing the amount of combustion sources that contribute to air pollution we can work on solving multiple problems at once.

    In section \ref{purpose} we will present how we aim to create a tool to help with both understanding why, and solving societal, economical and resource problems related to traffic and congestion.

% WRITTEN BY FELIX JÖNSSON, 2023
\section{Purpose}\label{purpose}
    The purpose of the project is to design and construct a 3D traffic simulation tool with high accessibility, that should provide detailed and accessible data. This allows the user to evaluate the performance of different road networks and traffic scenarios, and make informed decisions about urban planning and infrastructure. Data should be presented in real-time through presentation of relevant statistics. By adjusting the parameters of the simulation, the user should be able to witness the effect of their tweaking, and easily see if their changes have a positive or negative impact across relevant environmental dimensions such as congestion level or emissions.

% WRITTEN BY FELIX JÖNSSON, 2023
\section{Related Work} \label{Section_ref}
    This section will provide a review of various existing traffic simulation tools, their underlying models, and a comparison among them. We also go on to discuss the Agent-Based Modeling Framework for Unity3D (ABMU), and highlight some key features that this framework has implemented to allow for the successful creation of an ABM framework within Unity's environment.
% WRITTEN BY FELIX JÖNSSON, 2023
    \subsection{Microscopic Traffic Simulations}\label{traffic-simulations}
        There exists a plethora of different available tools for traffic simulation, which are in turn built upon different underlying models. In a paper from 2021\cite{NGUYEN2021100486}, the authors classifies current available simulations according to the following four categories, with regards to granularity of each model: Macroscopic, Microscopic, Mesoscopic, and Nanoscopic. These tools allow researchers to answer complex questions and evaluate different scenarios in both real-time observations and through post-simulation data analysis. Agent-based traffic models position themselves within the Microscopic category and allow for a highly realistic representation of traffic flow. In this context, emergent behaviors such as congestion and bottleneck formation can occur due to the natural interplay of the autonomous agents within the simulation. A bottleneck formation refers to a localised area where traffic flow is significantly reduced, often due to factors such as road geometry, traffic incidents, or high demand. These bottlenecks can lead to increased travel times, reduced efficiency, and a greater likelihood of accidents\cite{ZENG2021125918bottleneck}.

        Simulation of Urban Mobility (SUMO)\cite{sumo-paper-2012}\cite{sumo-website} is a popular and freely available microscopic traffic simulation that was initially developed at the German Aerospace Center (DLR). It provides the users with the ability to model a range of transportation agents including cars, buses, bicycles and pedestrians, in both urban and rural environments. The simulation is deterministic by default, but users have the option to introduce stochastic processes in different ways, making it a highly versatile tool for traffic simulation and analysis. The software offers various tools for the creation of networks and allows the user to modify these networks through an editor. This editor can also import and export network data from external sources. In addition to this, SUMO provides the user with features for visualising the obtained data and analysing it through various reports and plots. Users can also customise SUMO to accommodate their specific need through the application programming interface (API) and integrate the simulation with other software. SUMO is also capable of modeling emission based on vehicle type and speed.

        Another popular solution for simulating traffic is the commercially available software PTV Vissim. This software is designed by the German-based company PTV group which specialises in mobility and transportation solutions. It is designed to be quick and simple to set up with no scripting required by the user, and comes with a highly customisable editor. The software is part of a larger suite named PTV Traffic Suite, which allows it to exchange data and collaborate across multiple platforms. PTV Vissim offers a similar feature list to SUMO but differs in some important areas. Firstly, they are built upon different car following models. SUMO implements the Krauss model which is based on the idea that drivers adjust their vehicle’s speed and headway based on their perceived safety and comfort. Though a relatively easy to understand model, it has the disadvantage of assuming that the drivers only react to the speed and distance of the vehicle in front of them, and excludes a lot of factors such as the traffic signals, shape of the road, and driver psychology. Meanwhile, PTV Vissim implements the Wiedemann model\cite{ahmed2021} which share a lot of the same model parameters as the previously mentioned Krauss model but differ in their mathematical formulations and the way they calculate the acceleration of a vehicle. The model also introduces additional parameters, for example, a parameter for setting driver aggressiveness which regulates how risk-taking a driver is willing to be, and a parameter to regulate reaction time. Due to the additional parameters introduced here, the Wiedemann model is considered more realistic compared to the Krauss model, but is at the same time deemed to be more complex and requires a significant amount of parameter calibration.

        A crucial difference between the two simulation tools is that SUMO natively only supports graphical representation of a traffic environment in low detailed 2D, while PTV Vissim offers a feature rich 3D visualisation. The latter provides a range of tools for customising the 3D visualisation, including options for importing third party 3D models, setting and creating custom textures, and defining various customised visual effects. This advanced visualisation capability can significantly enhance the user experience and facilitate a more intuitive understanding of the simulated environment, which can prove to be beneficial when used for public presentations and stakeholder engagement. 
% WRITTEN BY FELIX JÖNSSON, 2023
    \subsection{ABMU}
        Agent-Based Modelling Framework for Unity3D (ABMU) is an open-source 3D agent-based modeling platform developed with the Unity3D game engine\cite{unity2021manual}. It was developed as a response to the lack of support for 3D ABMs\cite{abmu-paper}, and offers an extendable and user-friendly programming interface for Unity’s resources to create the foundation for a powerful and extendable model\cite{abmu2021}. This framework gives researchers and developers the tools to create highly immersive and visually appealing simulations that can provide deeper insights into complex systems and provide more effective communication of results.

        Some key features of ABMU include event scheduling and synchronous updates by a dedicated scheduler class, to delegate events in a manner that is decoupled from Unity’s native event execution order. This ensures a more robust and accurate simulation. These events get delegated to so called Steppers, which are modular components that encapsulates a targeted behavior or action. The events are made to be easily added and removed to enable researchers and developers to adjust parts of their simulation without the need the modify the core structure of the model. Furthermore, ABMU introduces wrappers around native Unity methods, enabling them to be used as Steppers within the framework. The benefit of this is allowing for easy extension using existing Unity libraries which can provide complex behaviors such as advanced pathfinding and physics simulation systems.

        ABMU not only offers a powerful and extensible platform for creating agent-based models, but also includes a diverse collection of example models to showcase its flexibility and potential applications. These examples includes demonstration of model implementations such as Epstein and Axtell's Sugarscape model\cite{epstein1996growing}, Reynolds' Boids model\cite{reynolds1987flocks}, and Schelling's segregation model\cite{schelling1971dynamic}. The models demonstrate the flexibility and capability of the framework, as well as offer guidance for users looking to develop their own models following best practices.
% WRITTEN BY FELIX JÖNSSON, 2023
\section{Societal and ethical aspects}\label{ethics}
    Ethical aspects can be broken down into two parts: aspects related to the method of the project, and possible consequences for users of the final product and society as a whole.  With regards to making sure that our methods adhere to an ethical practice, the main thing to be aware of here lays in data handling during user testing. It will be crucial to ensure that data is both collected and stored in a responsible manner. This will involve structuring clear and properly formatted consent forms\cite{ico2021consent}, anonymising data, and adhering to relevant data protection regulations such as the General Data Protection Regulation (GDPR)\cite{gdpr2016}.

    The ethical aspects of the finished product however, is accompanied by more complex considerations. One of the goals of this project is to create a tool that can be used by end-users of various occupations connected to traffic planning, and offer these users insight about the efficiency and emission associated with different road network configurations. Since these insights might lead to real-life decisions regarding actual infrastructure, careful consideration will have to be taken regarding the design we choose to implement and what sort of consequences these might have in the finished product. To instill model credibility and prevent model realism bias, we will have to communicate any assumptions and limitations of the model in an easy and accessible manner. ABMs are generally considered challenging with regards to validation and traceability\cite{abm-validation-issues}, and failing to mitigate these might lead to decisions being implemented on obscure premises. 
